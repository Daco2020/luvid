# ğŸ’Œ ì—°ì•  í¸ì§€í•¨ (Love Letter Box) ê¸°íšì„œ

> âš ï¸ **ì„ì‹œ ê¸°íš ë¬¸ì„œ** - ì¶”í›„ ê°œë°œ ì˜ˆì •

## 1. ê°œìš”

### ì»¨ì…‰

**"ëŠë¦° AI, ê¹Šì€ ê³µê°"** - ì¦‰ê°ì ì¸ ì±—ë´‡ì´ ì•„ë‹Œ, ì§„ì§€í•˜ê²Œ ê³ ë¯¼í•˜ê³  ë‹µì¥í•˜ëŠ” AI ì—°ì•  ìƒë‹´ ì„œë¹„ìŠ¤

### í•µì‹¬ ê°€ì¹˜

- **ì§„ì •ì„±**: í¸ì§€ë¼ëŠ” í˜•ì‹ìœ¼ë¡œ ì§„ì‹¬ì„ ë‹´ì€ ì†Œí†µ
- **ê¸°ë‹¤ë¦¼**: 6-24ì‹œê°„ì˜ ëŒ€ê¸° ì‹œê°„ìœ¼ë¡œ ì„¤ë ˜ê³¼ ê¸°ëŒ€ê° ì¡°ì„±
- **ë§ì¶¤í˜•**: ì‚¬ìš©ì í”„ë¡œí•„(ì„±ê²©, ê°€ì¹˜ê´€, ì• ì°©ìœ í˜•) ê¸°ë°˜ ê¹Šì´ ìˆëŠ” ìƒë‹´
- **ì„±ì¥**: ë‹¨ìˆœ ìœ„ë¡œê°€ ì•„ë‹Œ êµ¬ì²´ì ì¸ ì•¡ì…˜ í”Œëœ ì œì‹œ

---

## 2. ì‚¬ìš©ì í”Œë¡œìš°

### 2.1 ì§„ì…

```
í™ˆ í™”ë©´ â†’ "ğŸ’Œ ì—°ì•  í¸ì§€í•¨" ì¹´ë“œ í´ë¦­
â†’ (ì ê¸ˆ ìƒíƒœ) "Luv ID ë°œê¸‰ í›„ ì´ìš© ê°€ëŠ¥"
â†’ (í•´ê¸ˆ í›„) í¸ì§€í•¨ ë©”ì¸ í™”ë©´
```

### 2.2 í¸ì§€ ì“°ê¸°

```
1. "ìƒˆ í¸ì§€ ì“°ê¸°" ë²„íŠ¼ í´ë¦­
2. ê³ ë¯¼ ì¹´í…Œê³ ë¦¬ ì„ íƒ (ì„ íƒì‚¬í•­)
   - ğŸ’˜ ê³ ë°± ê³ ë¯¼
   - ğŸ’” ì´ë³„ í›„ ë§ˆìŒì •ë¦¬
   - ğŸŒ¹ ì§ì‚¬ë‘
   - âš¡ ê´€ê³„ ê°ˆë“±
   - ğŸ¤” ì—°ì•  ì‹œì‘ ì „ ê³ ë¯¼
   - ğŸ’­ ê¸°íƒ€
3. í¸ì§€ ì‘ì„± (300-1000ì)
4. "í¸ì§€ ë³´ë‚´ê¸°" â†’ í™•ì¸ ëª¨ë‹¬
5. ì „ì†¡ ì™„ë£Œ â†’ "ì½ëŠ” ì¤‘..." ìƒíƒœ
```

### 2.3 ë‹µì¥ ë°›ê¸°

```
1. 6-24ì‹œê°„ í›„ í‘¸ì‹œ ì•Œë¦¼
   "ğŸ’Œ ë‹µì¥ì´ ë„ì°©í–ˆì–´ìš”"
2. ì•± ì§„ì… â†’ í¸ì§€í•¨
3. ìƒˆ í¸ì§€ í™•ì¸ (ë´‰íˆ¬ ì• ë‹ˆë©”ì´ì…˜)
4. ë‹µì¥ ì½ê¸°
5. (ì„ íƒ) "ë„ì›€ì´ ë˜ì—ˆì–´ìš”" í”¼ë“œë°±
```

---

## 3. í™”ë©´ êµ¬ì„±

### 3.1 í¸ì§€í•¨ ë©”ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’Œ ì—°ì•  í¸ì§€í•¨              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  ğŸ“¬ ë³´ë‚¸ í¸ì§€ (2)           â”‚
â”‚  â”œâ”€ ì½ëŠ” ì¤‘... (1)          â”‚
â”‚  â””â”€ ë‹µì¥ ì™„ë£Œ (1)           â”‚
â”‚                             â”‚
â”‚  ğŸ’Œ ë°›ì€ í¸ì§€ (3)           â”‚
â”‚  â””â”€ ìµœì‹ ìˆœ ì •ë ¬             â”‚
â”‚                             â”‚
â”‚  [âœï¸ ìƒˆ í¸ì§€ ì“°ê¸°]          â”‚
â”‚                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚  ì´ë²ˆ ë‹¬ í¸ì§€: 2/2 (ë¬´ë£Œ)   â”‚
â”‚  ğŸ’ ë¬´ì œí•œ í¸ì§€ ë°›ê¸°         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 í¸ì§€ ì“°ê¸° í™”ë©´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† í¸ì§€ ì“°ê¸°                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  ì–´ë–¤ ê³ ë¯¼ì¸ê°€ìš”? (ì„ íƒ)     â”‚
â”‚  [ğŸ’˜ ê³ ë°±] [ğŸ’” ì´ë³„] ...    â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ê³ ë¯¼ì„ í¸ì§€ë¡œ ì¨ì£¼ì„¸ìš” â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚
â”‚  â”‚ (300-1000ì)          â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  ğŸ’¡ Tip: êµ¬ì²´ì ì¼ìˆ˜ë¡       â”‚
â”‚     ë” ë„ì›€ì´ ë˜ëŠ” ë‹µë³€ì„    â”‚
â”‚     ë°›ì„ ìˆ˜ ìˆì–´ìš”          â”‚
â”‚                             â”‚
â”‚  [í¸ì§€ ë³´ë‚´ê¸°]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ë‹µì¥ ì½ê¸° í™”ë©´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† ë‹µì¥                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  From. AI ìƒë‹´ì‚¬            â”‚
â”‚  2024.02.06 ë„ì°©            â”‚
â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                       â”‚  â”‚
â”‚  â”‚ ì•ˆë…•í•˜ì„¸ìš”,            â”‚  â”‚
â”‚  â”‚ ê³ ë¯¼ì„ ë‚˜ëˆ ì£¼ì…”ì„œ      â”‚  â”‚
â”‚  â”‚ ê°ì‚¬í•´ìš”...           â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚
â”‚  â”‚ [ë‹µì¥ ë‚´ìš©]           â”‚  â”‚
â”‚  â”‚                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚
â”‚  ì´ ë‹µì¥ì´ ë„ì›€ì´ ë˜ì—ˆë‚˜ìš”?  â”‚
â”‚  [ğŸ‘ ë„ì›€ëì–´ìš”] [ğŸ’¬ ë” ê¶ê¸ˆí•´ìš”] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ê¸°ìˆ  êµ¬í˜„

### 4.1 ë°ì´í„° ëª¨ë¸

#### `love_letters` í…Œì´ë¸”

```sql
CREATE TABLE love_letters (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  category TEXT,                    -- ê³ ë¯¼ ì¹´í…Œê³ ë¦¬
  content TEXT NOT NULL,            -- í¸ì§€ ë‚´ìš©
  status TEXT NOT NULL,             -- 'pending', 'processing', 'replied'
  ai_response TEXT,                 -- AI ë‹µì¥
  created_at TIMESTAMPTZ DEFAULT NOW(),
  replied_at TIMESTAMPTZ,
  feedback TEXT,                    -- 'helpful', 'need_more'

  FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE INDEX idx_letters_user ON love_letters(user_id);
CREATE INDEX idx_letters_status ON love_letters(status);
```

### 4.2 AI í”„ë¡¬í”„íŠ¸ êµ¬ì¡°

```typescript
interface LetterContext {
  userProfile: {
    archetype: string; // ì‚¬ìš©ì ì•„í‚¤íƒ€ì…
    values: string[]; // í•µì‹¬ ê°€ì¹˜ê´€
    attachmentStyle: string; // ì• ì°©ìœ í˜•
    conflictStyle: string; // ê°ˆë“± í•´ê²° ìŠ¤íƒ€ì¼
  };
  userManual: {
    strengths: string[]; // ê°•ì 
    weaknesses: string[]; // ì•½ì 
    emotionalPattern: string; // ê°ì • íŒ¨í„´
  };
  letter: {
    category: string;
    content: string;
  };
}

// AI í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ
const prompt = `
ë‹¹ì‹ ì€ ì—°ì•  ìƒë‹´ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. 
ì‚¬ìš©ìì˜ ì‹¬ë¦¬ í”„ë¡œí•„ì„ ê¹Šì´ ì´í•´í•˜ê³ , 
ë”°ëœ»í•˜ë©´ì„œë„ êµ¬ì²´ì ì¸ ì¡°ì–¸ì„ ì œê³µí•˜ì„¸ìš”.

[ì‚¬ìš©ì í”„ë¡œí•„]
- ì•„í‚¤íƒ€ì…: ${context.userProfile.archetype}
- í•µì‹¬ ê°€ì¹˜: ${context.userProfile.values.join(", ")}
- ì• ì°©ìœ í˜•: ${context.userProfile.attachmentStyle}
...

[í¸ì§€ ë‚´ìš©]
${context.letter.content}

[ë‹µì¥ ì‘ì„± ê°€ì´ë“œ]
1. ê³µê°ìœ¼ë¡œ ì‹œì‘ (2-3ë¬¸ì¥)
2. ìƒí™© ë¶„ì„ (í”„ë¡œí•„ ê¸°ë°˜)
3. êµ¬ì²´ì  ì¡°ì–¸ (3-5ê°€ì§€ ì•¡ì…˜ ì•„ì´í…œ)
4. ë”°ëœ»í•œ ë§ˆë¬´ë¦¬

ë‹µì¥ì€ í¸ì§€ í˜•ì‹ìœ¼ë¡œ, 600-1000ìë¡œ ì‘ì„±í•˜ì„¸ìš”.
`;
```

### 4.3 ë‹µì¥ ìƒì„± í”Œë¡œìš°

```typescript
// 1. í¸ì§€ ì ‘ìˆ˜
async function submitLetter(
  userId: string,
  content: string,
  category?: string
) {
  const letterId = generateLetterId();

  await supabase.from("love_letters").insert({
    id: letterId,
    user_id: userId,
    content,
    category,
    status: "pending",
  });

  // ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… íì— ì¶”ê°€
  await queueLetterProcessing(letterId);

  return letterId;
}

// 2. AI ë‹µì¥ ìƒì„± (ë°±ê·¸ë¼ìš´ë“œ)
async function processLetter(letterId: string) {
  const letter = await getLetter(letterId);
  const userContext = await getUserContext(letter.user_id);

  // ìƒíƒœ ì—…ë°ì´íŠ¸
  await updateLetterStatus(letterId, "processing");

  // AI í˜¸ì¶œ
  const response = await generateAIResponse(userContext, letter);

  // ìµœì†Œ 6ì‹œê°„ ëŒ€ê¸° (ì„¤ë ˜ ìœ ì§€)
  const minWaitTime = 6 * 60 * 60 * 1000;
  const elapsed = Date.now() - new Date(letter.created_at).getTime();
  if (elapsed < minWaitTime) {
    await delay(minWaitTime - elapsed);
  }

  // ë‹µì¥ ì €ì¥ ë° ì•Œë¦¼
  await supabase
    .from("love_letters")
    .update({
      ai_response: response,
      status: "replied",
      replied_at: new Date().toISOString(),
    })
    .eq("id", letterId);

  await sendPushNotification(letter.user_id, "ğŸ’Œ ë‹µì¥ì´ ë„ì°©í–ˆì–´ìš”");
}
```

---

## 5. ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸

### 5.1 ë¬´ë£Œ í”Œëœ

- ì›” 2í†µ í¸ì§€
- ë‹µì¥ ì‹œê°„: 12-24ì‹œê°„

### 5.2 í”„ë¦¬ë¯¸ì—„ í”Œëœ (ì›” 9,900ì›)

- ë¬´ì œí•œ í¸ì§€
- ë¹ ë¥¸ ë‹µì¥: 6-12ì‹œê°„
- ìš°ì„  ì²˜ë¦¬
- ê³¼ê±° í¸ì§€ ë¬´ì œí•œ ì—´ëŒ

### 5.3 ìˆ˜ìµ ì˜ˆìƒ

```
MAU 10,000ëª… ê¸°ì¤€
- ë¬´ë£Œ ì‚¬ìš©ì: 9,000ëª… (90%)
- í”„ë¦¬ë¯¸ì—„ ì „í™˜: 1,000ëª… (10%)
- ì›” ë§¤ì¶œ: 1,000ëª… Ã— 9,900ì› = 9,900,000ì›
```

---

## 6. ê°œë°œ ìš°ì„ ìˆœìœ„

### Phase 1: MVP (2ì£¼)

- [ ] í¸ì§€ ì“°ê¸°/ë³´ê¸° UI
- [ ] ê¸°ë³¸ AI ë‹µì¥ ìƒì„±
- [ ] í‘¸ì‹œ ì•Œë¦¼
- [ ] ë¬´ë£Œ í”Œëœ (ì›” 2í†µ ì œí•œ)

### Phase 2: ê³ ë„í™” (2ì£¼)

- [ ] í”„ë¡œí•„ ê¸°ë°˜ ë§ì¶¤í˜• ë‹µì¥
- [ ] ì¹´í…Œê³ ë¦¬ë³„ í”„ë¡¬í”„íŠ¸ ìµœì í™”
- [ ] í”¼ë“œë°± ì‹œìŠ¤í…œ
- [ ] í”„ë¦¬ë¯¸ì—„ í”Œëœ

### Phase 3: í™•ì¥ (4ì£¼)

- [ ] í¸ì§€ ê²€ìƒ‰/í•„í„°
- [ ] ì›”ê°„ ë¦¬í¬íŠ¸
- [ ] ë² ìŠ¤íŠ¸ í¸ì§€ íë ˆì´ì…˜
- [ ] ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ (ì„ íƒ)

---

## 7. ì„±ê³µ ì§€í‘œ (KPI)

### í•µì‹¬ ì§€í‘œ

- **í¸ì§€ ë°œì†¡ë¥ **: DAU ëŒ€ë¹„ í¸ì§€ ì‘ì„± ë¹„ìœ¨
- **ë‹µì¥ ë§Œì¡±ë„**: "ë„ì›€ëì–´ìš”" ë¹„ìœ¨
- **ì¬ë°œì†¡ë¥ **: ë‹µì¥ ë°›ì€ í›„ ë‹¤ì‹œ í¸ì§€ ì“°ëŠ” ë¹„ìœ¨
- **í”„ë¦¬ë¯¸ì—„ ì „í™˜ìœ¨**: ë¬´ë£Œ â†’ ìœ ë£Œ ì „í™˜ ë¹„ìœ¨

### ëª©í‘œ (3ê°œì›”)

- í¸ì§€ ë°œì†¡ë¥ : 30%
- ë‹µì¥ ë§Œì¡±ë„: 80%
- ì¬ë°œì†¡ë¥ : 50%
- í”„ë¦¬ë¯¸ì—„ ì „í™˜ìœ¨: 10%

---

## 8. ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘

### ë¦¬ìŠ¤í¬ 1: AI ë‹µë³€ í’ˆì§ˆ

- **ëŒ€ì‘**: ì´ˆê¸° ìˆ˜ë™ ê²€ìˆ˜ + ì§€ì†ì  í”„ë¡¬í”„íŠ¸ ê°œì„ 

### ë¦¬ìŠ¤í¬ 2: ë‹µì¥ ëŒ€ê¸° ì‹œê°„ ë¶ˆë§Œ

- **ëŒ€ì‘**:
  - "ì½ëŠ” ì¤‘..." ìƒíƒœ ì‹œê°í™”
  - ì˜ˆìƒ ë„ì°© ì‹œê°„ í‘œì‹œ
  - í”„ë¦¬ë¯¸ì—„ ë¹ ë¥¸ ë‹µì¥ ì˜µì…˜

### ë¦¬ìŠ¤í¬ 3: ì•…ìš© (ìŠ¤íŒ¸, ë¶€ì ì ˆí•œ ë‚´ìš©)

- **ëŒ€ì‘**:
  - ì¼ì¼ í¸ì§€ ìˆ˜ ì œí•œ
  - ì½˜í…ì¸  í•„í„°ë§
  - ì‹ ê³  ì‹œìŠ¤í…œ

---

## 9. ë‹¤ìŒ ë‹¨ê³„

1. âœ… ê¸°íš ìŠ¹ì¸
2. [ ] ë””ìì¸ ì‹œì•ˆ (í¸ì§€ UI/UX)
3. [ ] AI í”„ë¡¬í”„íŠ¸ í…ŒìŠ¤íŠ¸
4. [ ] MVP ê°œë°œ ì‹œì‘
5. [ ] ë² íƒ€ í…ŒìŠ¤íŠ¸ (50ëª…)
